<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<hivemq xsi:schemaLocation="config.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <mqtt-listeners>
        <tcp-listener>
            <port>1883</port>
            <bind-address>0.0.0.0</bind-address>
        </tcp-listener>
    </mqtt-listeners>
    <mqtt-sn-listeners>
        <udp-listener>
            <port>2442</port>
            <bind-address>0.0.0.0</bind-address>
        </udp-listener>
    </mqtt-sn-listeners>
    <mqtt>
        <queued-messages>
            <max-queue-size>1000</max-queue-size>
            <strategy>discard</strategy>
        </queued-messages>
        <retained-messages>
            <enabled>true</enabled>
        </retained-messages>
        <wildcard-subscriptions>
            <enabled>true</enabled>
        </wildcard-subscriptions>
        <quality-of-service>
            <max-qos>2</max-qos>
        </quality-of-service>
        <topic-alias>
            <enabled>true</enabled>
            <max-per-client>5</max-per-client>
        </topic-alias>
        <message-expiry>
            <max-interval>4294967296</max-interval>
        </message-expiry>
        <session-expiry>
            <max-interval>4294967295</max-interval>
        </session-expiry>
        <subscription-identifier>
            <enabled>true</enabled>
        </subscription-identifier>
        <shared-subscriptions>
            <enabled>true</enabled>
        </shared-subscriptions>
        <keep-alive>
            <max-keep-alive>65535</max-keep-alive>
            <allow-unlimited>true</allow-unlimited>
        </keep-alive>
        <packets>
            <max-packet-size>268435460</max-packet-size>
        </packets>
        <receive-maximum>
            <server-receive-maximum>10</server-receive-maximum>
        </receive-maximum>
    </mqtt>
    <mqtt-sn>
        <predefined-topics/>
        <allow-empty-client-identifier>
            <enabled>false</enabled>
        </allow-empty-client-identifier>
        <discovery>
            <enabled>false</enabled>
            <broadcast-addresses/>
            <discovery-interval-seconds>30</discovery-interval-seconds>
        </discovery>
        <allow-anonymous-publish-minus-one>
            <enabled>false</enabled>
        </allow-anonymous-publish-minus-one>
        <allow-waking-ping-session-hijack>
            <enabled>false</enabled>
        </allow-waking-ping-session-hijack>
        <topic-registrations-held-during-sleep>
            <enabled>false</enabled>
        </topic-registrations-held-during-sleep>
        <max-client-identifier-length>23</max-client-identifier-length>
        <gateway-id>1</gateway-id>
    </mqtt-sn>
    <restrictions>
        <max-connections>-1</max-connections>
        <max-client-id-length>65535</max-client-id-length>
        <max-topic-length>65535</max-topic-length>
        <no-connect-idle-timeout>10000</no-connect-idle-timeout>
        <incoming-bandwidth-throttling>0</incoming-bandwidth-throttling>
    </restrictions>
    <security>
        <payload-format-validation>
            <enabled>false</enabled>
        </payload-format-validation>
        <utf8-validation>
            <enabled>true</enabled>
        </utf8-validation>
        <allow-empty-client-id>
            <enabled>true</enabled>
        </allow-empty-client-id>
        <allow-request-problem-information>
            <enabled>true</enabled>
        </allow-request-problem-information>
    </security>
    <persistence>
        <mode>in-memory</mode>
    </persistence>
    <mqtt-bridges>
        <mqtt-bridge>
            <id>UNS-Broker</id>
            <remote-broker>
                <port>1883</port>
                <host>192.168.0.100</host>
                <mqtt>
                    <client-id></client-id>
                    <clean-start>true</clean-start>
                    <session-expiry>3600</session-expiry>
                    <keep-alive>60</keep-alive>
                </mqtt>
                <authentication>
                    <mqtt-simple-authentication>
                        <username></username>
                        <password></password>
                    </mqtt-simple-authentication>
                </authentication>
            </remote-broker>
            <remote-subscriptions/>
            <forwarded-topics/>
            <loop-prevention>
                <enabled>false</enabled>
                <hop-count-limit>1</hop-count-limit>
            </loop-prevention>
            <persist>true</persist>
        </mqtt-bridge>
    </mqtt-bridges>
    <admin-api>
        <enabled>true</enabled>
        <listeners>
            <http-listener>
                <port>8080</port>
                <bind-address>0.0.0.0</bind-address>
            </http-listener>
        </listeners>
        <generated-tokens>
            <keySize>2048</keySize>
            <issuer>HiveMQ-Edge</issuer>
            <audience>HiveMQ-Edge-Api</audience>
            <expiryTimeMinutes>30</expiryTimeMinutes>
            <tokenEarlyEpochThresholdMinutes>2</tokenEarlyEpochThresholdMinutes>
        </generated-tokens>
        <users/>
    </admin-api>
    <uns>
        <isa95>
            <enabled>false</enabled>
            <prefix-all-topics>false</prefix-all-topics>
        </isa95>
    </uns>
    <dynamic-configuration>
        <allow-configuration-export>false</allow-configuration-export>
        <allow-mutable-configuration>true</allow-mutable-configuration>
    </dynamic-configuration>
    <usage-tracking>
        <enabled>true</enabled>
    </usage-tracking>
    <protocol-adapters>
        <protocol-adapter>
            <adapterId>simulation-server-2</adapterId>
            <protocolId>opcua</protocolId>
            <config>
                <opcuaToMqtt>
                    <serverQueueSize>1</serverQueueSize>
                    <publishingInterval>1000</publishingInterval>
                </opcuaToMqtt>
                <security>
                    <policy>NONE</policy>
                </security>
                <tls>
                    <enabled>false</enabled>
                </tls>
                <uri>opc.tcp://192.168.0.108:53530/OPCUA/SimulationServer</uri>
                <overrideUri>true</overrideUri>
            </config>
            <tags>
                <tag>
                    <name>temperature/for/machine_1</name>
                    <description>This tag is about sensor data</description>
                    <definition>
                        <node>ns=3;i=1001</node>
                    </definition>
                </tag>
            </tags>
            <southboundMappings/>
            <northboundMappings>
                <northboundMapping>
                    <topic>machine/1/temperature</topic>
                    <tagName>temperature/for/machine_1</tagName>
                    <maxQos>1</maxQos>
                    <messageHandlingOptions>MQTTMessagePerTag</messageHandlingOptions>
                    <includeTagNames>false</includeTagNames>
                    <includeTimestamp>true</includeTimestamp>
                    <mqttUserProperties/>
                    <messageExpiryInterval>9223372036854775807</messageExpiryInterval>
                </northboundMapping>
            </northboundMappings>
        </protocol-adapter>
        <protocol-adapter>
            <adapterId>Sensor-01</adapterId>
            <protocolId>simulation</protocolId>
            <config>
                <minDelay>0</minDelay>
                <maxDelay>0</maxDelay>
                <minValue>0</minValue>
                <maxValue>1000</maxValue>
                <simulationToMqtt>
                    <pollingIntervalMillis>1000</pollingIntervalMillis>
                    <maxPollingErrorsBeforeRemoval>10</maxPollingErrorsBeforeRemoval>
                </simulationToMqtt>
            </config>
            <tags/>
            <southboundMappings/>
            <northboundMappings/>
        </protocol-adapter>
    </protocol-adapters>
    <modules/>
    <internal/>
</hivemq>
